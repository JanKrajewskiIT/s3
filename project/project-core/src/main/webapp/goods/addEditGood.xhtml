<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:body>
    <ui:composition template="../layout/main-template.xhtml">
        <ui:define name="content">
            <!-- Right side column. Contains the navbar and content of the page -->
            <aside class="right-side">
                <!-- Content Header (Page header) -->
                <section class="content-header">
                    <ol class="breadcrumb">
                        <li><a href="#"><i class="fa fa-dashboard"></i> Kokpit</a></li>
                        <li><a href="#">Produkty</a></li>
                        <li class="active">Dodaj</li>
                    </ol>
                </section>

                <!-- Main content -->
                <section class="content">
                    <div class="row">
                        <div class="col-xs-12">
                            <div class="box">
                                <div class="box-header">
                                    <h3 class="box-title">Dodaj produkt</h3>
                                </div>
                                <div class="box-body">
                                    <h:form id="addEditGoodFormId">
                                        <p:messages autoUpdate="true"/>

                                        <div class="row">
                                            <div class="col-xs-4">
                                                <label>Symbol</label>
                                                <p:inputText id="symbolInputText" value="#{goodAddEditBean.good.symbol}"
                                                             type="text" styleClass="form-control"
                                                             placeholder="Wprowadz symbol"/>
                                            </div>
                                            <div class="col-xs-4">
                                                <label>Nazwa</label>
                                                <p:inputText id="nameInputText" type="text"
                                                             value="#{goodAddEditBean.good.name}"
                                                             styleClass="form-control" placeholder="Wprowadz nazwe"/>
                                            </div>
                                            <div class="col-xs-4">
                                                <label>Typ</label>
                                                <h:selectOneRadio styleClass="typeSelectOneRadio"
                                                                  id="typeSelectOneRadio"
                                                                  value="#{goodAddEditBean.good.type}">
                                                    <f:selectItem
                                                            itemLabel="Towar &emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;"
                                                            itemValue="GOOD"/>
                                                    <f:selectItem itemLabel="Usługa" itemValue="SERVICE"/>
                                                </h:selectOneRadio>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-4">
                                                <label>Jednostka</label>
                                                <h:selectOneMenu id="unitSelectMenu"
                                                                 value="#{goodAddEditBean.good.unit.id}"
                                                                 styleClass="form-control">
                                                    <f:selectItem itemLabel="---" itemValue="#{null}"/>
                                                    <f:selectItems value="#{goodAddEditBean.units}" var="unit"
                                                                   itemLabel="#{unit.name}" itemValue="#{unit.id}"/>
                                                </h:selectOneMenu>
                                            </div>
                                            <div class="col-xs-4">
                                                <label>Grupa Towarowa</label>
                                                <h:selectOneMenu id="goodsGroupsSelectMenu"
                                                                 value="#{goodAddEditBean.good.group.id}"
                                                                 styleClass="form-control">
                                                    <f:selectItem itemLabel="---" itemValue="#{null}"/>
                                                    <f:selectItems value="#{goodAddEditBean.goodsGroups}"
                                                                   var="group" itemLabel="#{group.name}"
                                                                   itemValue="#{group.id}"/>
                                                </h:selectOneMenu>
                                            </div>
                                            <div class="col-xs-4">
                                                <label>Rodzaj podatku</label>
                                                <h:selectOneMenu id="taxesSelectMenu"
                                                                 value="#{goodAddEditBean.good.tax.id}"
                                                                 styleClass="form-control">
                                                    <f:selectItem itemLabel="---" itemValue="#{null}"/>
                                                    <f:selectItems value="#{goodAddEditBean.taxes}" var="tax"
                                                                   itemLabel="#{tax.name}" itemValue="#{tax.id}"/>
                                                </h:selectOneMenu>
                                            </div>
                                        </div>
                                        <div class="row" style="">
                                            <div class="col-xs-4">
                                                <label>PKWiU SWW</label>
                                                <p:inputText id="pkwiuInputText" value="#{goodAddEditBean.good.pkwiu}"
                                                             type="text" styleClass="form-control"
                                                             placeholder="Wprowadz PKWiU SWW"/>
                                            </div>
                                            <div class="col-xs-4">
                                                <label>Waga</label>
                                                <p:inputText id="weightInputText" value="#{goodAddEditBean.good.weight}"
                                                             type="text" styleClass="form-control"
                                                             placeholder="Wprowadz wagę">
                                                    <f:convertNumber type="number" groupingUsed="true"
                                                                     minFractionDigits="2" pattern="#0.00"/>
                                                </p:inputText>
                                            </div>
                                            <div class="col-xs-2">
                                                <label>Cena Magazynowa Netto</label>
                                                <p:inputText id="priceMagNet" type="text"
                                                             value="#{goodAddEditBean.good.prices.priceMagNet}"
                                                             styleClass="form-control text-right"
                                                             placeholder="Wprowadz cene">
                                                    <f:convertNumber type="number" groupingUsed="true"
                                                                     minFractionDigits="2" pattern="#0.00"/>
                                                    <p:ajax event="blur"
                                                            listener="#{goodAddEditBean.handlePriceMagNetChange}"
                                                            update="priceMagNet,priceMagGross"/>
                                                </p:inputText>
                                            </div>
                                            <div class="col-xs-2">
                                                <label>Cena Magazynowa Brutto</label>
                                                <p:inputText id="priceMagGross" type="text"
                                                             value="#{goodAddEditBean.good.prices.priceMagGross}"
                                                             styleClass="form-control text-right"
                                                             placeholder="Wprowadz cene">
                                                    <f:convertNumber type="number" groupingUsed="true"
                                                                     minFractionDigits="2" pattern="#0.00"/>
                                                    <p:ajax event="blur"
                                                            listener="#{goodAddEditBean.handlePriceMagGrossChange}"
                                                            update="priceMagNet,priceMagGross"/>
                                                </p:inputText>
                                            </div>
                                        </div>
                                        <div class="row" style="">
                                            <div class="col-xs-7">
                                                <label>Opis</label>
                                                <p:inputTextarea id="descriptionTextarea" rows="8"
                                                                 value="#{goodAddEditBean.good.description}"
                                                                 styleClass="form-control" placeholder="Wprowadz opis"/>
                                            </div>
                                            <div class="col-xs-5">
                                                <br/>
                                                <p:panelGrid styleClass="table table-bordered dataTable">
                                                    <f:facet name="header">
                                                        <p:row>
                                                            <p:column colspan="4"
                                                                      style="font-weight: bold;">Ceny</p:column>
                                                        </p:row>
                                                        <p:row>
                                                            <p:column></p:column>
                                                            <p:column style="font-weight: bold;">Netto</p:column>
                                                            <p:column style="font-weight: bold;">Brutto</p:column>
                                                        </p:row>
                                                    </f:facet>
                                                    <p:row>
                                                        <p:column style="font-weight: bold;">Cena A</p:column>
                                                        <p:column>
                                                            <p:inputText id="priceANet"
                                                                         value="#{goodAddEditBean.good.prices.priceANet}"
                                                                         styleClass="form-control text-right">
                                                                <f:convertNumber type="number" groupingUsed="true"
                                                                                 minFractionDigits="2" pattern="#0.00"/>
                                                                <p:ajax event="blur"
                                                                        listener="#{goodAddEditBean.handlePriceANetChange}"
                                                                        update="priceANet,priceAGross"/>
                                                            </p:inputText>
                                                        </p:column>
                                                        <p:column>
                                                            <p:inputText id="priceAGross"
                                                                         value="#{goodAddEditBean.good.prices.priceAGross}"
                                                                         styleClass="form-control text-right">
                                                                <f:convertNumber type="number" groupingUsed="true"
                                                                                 minFractionDigits="2" pattern="#0.00"/>
                                                                <p:ajax event="blur"
                                                                        listener="#{goodAddEditBean.handlePriceAGrossChange}"
                                                                        update="priceANet,priceAGross"/>
                                                            </p:inputText>
                                                        </p:column>
                                                    </p:row>
                                                    <p:row>
                                                        <p:column style="font-weight: bold;">Cena B</p:column>
                                                        <p:column>
                                                            <p:inputText id="priceBNet"
                                                                         value="#{goodAddEditBean.good.prices.priceBNet}"
                                                                         styleClass="form-control text-right">
                                                                <f:convertNumber type="number" groupingUsed="true"
                                                                                 minFractionDigits="2" pattern="#0.00"/>
                                                                <p:ajax event="blur"
                                                                        listener="#{goodAddEditBean.handlePriceBNetChange}"
                                                                        update="priceBNet,priceBGross"/>
                                                            </p:inputText>
                                                        </p:column>
                                                        <p:column>
                                                            <p:inputText id="priceBGross"
                                                                         value="#{goodAddEditBean.good.prices.priceBGross}"
                                                                         styleClass="form-control text-right">
                                                                <f:convertNumber type="number" groupingUsed="true"
                                                                                 minFractionDigits="2" pattern="#0.00"/>
                                                                <p:ajax event="blur"
                                                                        listener="#{goodAddEditBean.handlePriceBGrossChange}"
                                                                        update="priceBNet,priceBGross"/>
                                                            </p:inputText>
                                                        </p:column>
                                                    </p:row>
                                                    <p:row>
                                                        <p:column style="font-weight: bold;">Cena C</p:column>
                                                        <p:column>
                                                            <p:inputText id="priceCNet"
                                                                         value="#{goodAddEditBean.good.prices.priceCNet}"
                                                                         styleClass="form-control text-right">
                                                                <f:convertNumber type="number" groupingUsed="true"
                                                                                 minFractionDigits="2" pattern="#0.00"/>
                                                                <p:ajax event="blur"
                                                                        listener="#{goodAddEditBean.handlePriceCNetChange}"
                                                                        update="priceCNet,priceCGross"/>
                                                            </p:inputText>
                                                        </p:column>
                                                        <p:column>
                                                            <p:inputText id="priceCGross"
                                                                         value="#{goodAddEditBean.good.prices.priceCGross}"
                                                                         styleClass="form-control text-right">
                                                                <f:convertNumber type="number" groupingUsed="true"
                                                                                 minFractionDigits="2" pattern="#0.00"/>
                                                                <p:ajax event="blur"
                                                                        listener="#{goodAddEditBean.handlePriceCGrossChange}"
                                                                        update="priceCNet,priceCGross"/>
                                                            </p:inputText>
                                                        </p:column>
                                                    </p:row>
                                                </p:panelGrid>
                                            </div>
                                        </div>
                                        <br/>

                                        <div class="row">
                                            <div class="col-xs-12">
                                                <p:commandButton value="Zapisz"
                                                                 styleClass="btn btn-primary btn-lg pull-right"
                                                                 action="#{goodAddEditBean.saveGood()}"/>
                                                <p:commandButton value="Wyczyść"
                                                                 styleClass="btn btn-primary btn-lg pull-right"
                                                                 style="margin-right:  10px" ajax="true"
                                                                 update="@(form :not(.typeSelectOneRadio))"
                                                                 action="#{goodAddEditBean.clear()}"/>
                                            </div>
                                        </div>
                                    </h:form>
                                </div>
                                <!-- /.box-body -->
                            </div>
                            <!-- /.box -->
                        </div>
                    </div>
                </section>
                <!-- /.content -->
            </aside>
            <!-- /.right-side -->
        </ui:define>
    </ui:composition>
</h:body>
</html>

