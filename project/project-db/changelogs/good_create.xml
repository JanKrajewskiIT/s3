<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.0.xsd">

	<changeSet id="init_changeset_units" author="bartosz.milczarek">
		<sql>
			CREATE SEQUENCE UNITS_SEQ
			START WITH 1
			INCREMENT BY 1
			NO MINVALUE
			NO MAXVALUE
			CACHE 1;
		</sql>
		<sql>
			CREATE TABLE UNITS (
				ID BIGINT DEFAULT NEXTVAL('UNITS_SEQ'::REGCLASS) NOT NULL,
				NAME CHARACTER VARYING(5) NOT NULL,
				ZERO_PLACES SMALLINT DEFAULT (2)::SMALLINT NOT NULL,
				IS_ACTIVE BOOLEAN DEFAULT TRUE NOT NULL,		
				VERSION BIGINT DEFAULT (1)::BIGINT NOT NULL
			);
		</sql>
		<sql>
			ALTER TABLE ONLY UNITS ADD CONSTRAINT UNITS_PK PRIMARY KEY (ID);
		</sql>
	</changeSet>
	<changeSet id="init_changeset_taxes" author="bartosz.milczarek">
		<sql>
			CREATE SEQUENCE TAXES_SEQ
			START WITH 1
			INCREMENT BY 1
			NO MINVALUE
			NO MAXVALUE
			CACHE 1;
		</sql>
		<sql>
			CREATE TABLE TAXES (
				ID BIGINT DEFAULT NEXTVAL('TAXES_SEQ'::REGCLASS) NOT NULL,
				NAME CHARACTER VARYING(50) NOT NULL,
				VALUE NUMERIC(4,2) NOT NULL,
				IS_ACTIVE BOOLEAN DEFAULT TRUE NOT NULL,		
				VERSION BIGINT DEFAULT (1)::BIGINT NOT NULL
			);
		</sql>
		<sql>
			ALTER TABLE ONLY TAXES ADD CONSTRAINT TAXES_PK PRIMARY KEY (ID);
		</sql>
	</changeSet>
	<changeSet id="init_changeset_goods_groups" author="bartosz.milczarek">
		<sql>
			CREATE SEQUENCE GOODS_GROUPS_SEQ
			START WITH 1
			INCREMENT BY 1
			NO MINVALUE
			NO MAXVALUE
			CACHE 1;
		</sql>
		<sql>
			CREATE TABLE GOODS_GROUPS (
				ID BIGINT NOT NULL DEFAULT NEXTVAL('GOODS_GROUPS_SEQ'::REGCLASS),
				NAME CHARACTER VARYING(60) NOT NULL,
				IS_ACTIVE BOOLEAN DEFAULT TRUE NOT NULL,		
				VERSION BIGINT DEFAULT (1)::BIGINT NOT NULL
			);
		</sql>
		<sql>
			ALTER TABLE ONLY GOODS_GROUPS ADD CONSTRAINT GOODS_GROUPS_PK PRIMARY KEY (ID);
		</sql>
	</changeSet>
	<changeSet id="init_changeset_goods" author="bartosz.milczarek">
		<sql>
			CREATE SEQUENCE GOODS_SEQ
			START WITH 1
			INCREMENT BY 1
			NO MINVALUE
			NO MAXVALUE
			CACHE 1;
		</sql>
		<sql>
			CREATE TABLE GOODS (
				ID BIGINT DEFAULT NEXTVAL('GOODS_SEQ'::REGCLASS) NOT NULL,
				SYMBOL CHARACTER VARYING(70) NOT NULL,
				NAME CHARACTER VARYING(70) NOT NULL,
				TYPE VARCHAR(10) NOT NULL,
				TAX_ID BIGINT DEFAULT (1)::BIGINT NOT NULL,
				UNIT_ID BIGINT DEFAULT (1)::BIGINT NOT NULL,
				GOOD_GROUP_ID BIGINT DEFAULT (1)::BIGINT NOT NULL,
				PKWIU CHARACTER VARYING(25),
				PRICE_A_NET NUMERIC(10,2) NOT NULL,
				PRICE_A_GROSS NUMERIC(10,2) NOT NULL,
				PRICE_MAG_NET NUMERIC(10,2) NOT NULL,
				PRICE_MAG_GROSS NUMERIC(10,2) NOT NULL,
				PRICE_B_NET NUMERIC(10,2),
				PRICE_B_GROSS NUMERIC(10,2),
				PRICE_C_NET NUMERIC(10,2),
				PRICE_C_GROSS NUMERIC(10,2),
				DESCRIPTION TEXT,
				WEIGHT DOUBLE PRECISION DEFAULT (0)::DOUBLE PRECISION,
				IS_ACTIVE BOOLEAN DEFAULT TRUE NOT NULL,		
				VERSION BIGINT DEFAULT (1)::BIGINT NOT NULL
			);
		</sql>
		<sql>
			ALTER TABLE ONLY GOODS ADD CONSTRAINT GOODS_PK PRIMARY KEY (ID);
			ALTER TABLE GOODS ADD CONSTRAINT GOODS_FK1 FOREIGN KEY (TAX_ID) REFERENCES TAXES (ID) MATCH FULL;
			ALTER TABLE GOODS ADD CONSTRAINT GOODS_FK2 FOREIGN KEY (UNIT_ID) REFERENCES UNITS (ID) MATCH FULL;
			ALTER TABLE GOODS ADD CONSTRAINT GOODS_FK3 FOREIGN KEY (GOOD_GROUP_ID) REFERENCES GOODS_GROUPS (ID) MATCH FULL;
		</sql>
	</changeSet>
</databaseChangeLog>